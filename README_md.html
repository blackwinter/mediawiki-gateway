<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>README - mediawiki-gateway Application documentation (v0.7.0.rc1)</title>

<link href="./fonts.css" rel="stylesheet">
<link href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/navigation.js"></script>
<script src="./js/search_index.js"></script>
<script src="./js/search.js"></script>
<script src="./js/searcher.js"></script>
<script src="./js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-MediaWiki%3A%3AGateway">MediaWiki::Gateway</a>
    <li><a href="#label-Installation">Installation</a>
    <li><a href="#label-Example">Example</a>
    <li><a href="#label-Changing+the+default+User-Agent">Changing the default User-Agent</a>
    <li><a href="#label-Development+environment">Development environment</a>
    <li><a href="#label-Testing+against+a+live+MediaWiki+instance">Testing against a live MediaWiki instance</a>
    <li><a href="#label-Status">Status</a>
    <li><a href="#label-Credits">Credits</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./COPYING.html">COPYING</a>
  
    <li><a href="./ChangeLog.html">ChangeLog</a>
  
    <li><a href="./README_md.html">README</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page README.md">

<h1 id="label-MediaWiki%3A%3AGateway"><a href="MediaWiki/Gateway.html">MediaWiki::Gateway</a><span><a href="#label-MediaWiki%3A%3AGateway">&para;</a> <a href="#documentation">&uarr;</a></span></h1>

<p>A Ruby framework for MediaWiki API manipulation. Features out of the box:</p>
<ul><li>
<p>Simple, elegant syntax for common operations</p>
</li><li>
<p>Handles login, edit, move etc tokens for you</p>
</li><li>
<p>List, search operations work around API limits to fetch all results</p>
</li><li>
<p>Support for maxlag detection and automated retries on 503</p>
</li><li>
<p>Integrated logging</p>
</li><li>
<p>Tested up to MediaWiki 1.22</p>
</li><li>
<p>Should work with Ruby 1.9.3 and higher</p>
</li></ul>

<p>Gem: <a
href="http://rubygems.org/gems/mediawiki-gateway">rubygems.org/gems/mediawiki-gateway</a></p>

<p>RDoc: <a
href="http://rubydoc.info/gems/mediawiki-gateway">rubydoc.info/gems/mediawiki-gateway</a></p>

<p>Git: <a
href="https://github.com/jpatokal/mediawiki-gateway">github.com/jpatokal/mediawiki-gateway</a></p>

<p>Travis CI: <a
href="https://travis-ci.org/jpatokal/mediawiki-gateway">travis-ci.org/jpatokal/mediawiki-gateway</a></p>

<h2 id="label-Installation">Installation<span><a href="#label-Installation">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>To install <a href="MediaWiki/Gateway.html">MediaWiki::Gateway</a>, execute
the command:</p>

<pre>$ gem install mediawiki-gateway</pre>

<p>Or add it to your application&#39;s <code>Gemfile</code>:</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;mediawiki-gateway&#39;</span>
</pre>

<p>and then execute the command:</p>

<pre>$ bundle</pre>

<h2 id="label-Example">Example<span><a href="#label-Example">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Simple page creation script:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;media_wiki&#39;</span>
<span class="ruby-identifier">mw</span> = <span class="ruby-constant">MediaWiki</span><span class="ruby-operator">::</span><span class="ruby-constant">Gateway</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;http://my-wiki.example/w/api.php&#39;</span>)
<span class="ruby-identifier">mw</span>.<span class="ruby-identifier">login</span>(<span class="ruby-string">&#39;RubyBot&#39;</span>, <span class="ruby-string">&#39;pa$$w0rd&#39;</span>)
<span class="ruby-identifier">mw</span>.<span class="ruby-identifier">create</span>(<span class="ruby-string">&#39;PageTitle&#39;</span>, <span class="ruby-string">&#39;Hello world!&#39;</span>, <span class="ruby-identifier">summary</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;My first page&#39;</span>)
</pre>

<h2 id="label-Changing+the+default+User-Agent">Changing the default User-Agent<span><a href="#label-Changing+the+default+User-Agent">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>In order to comply with Wikimedia&#39;s <a
href="https://meta.wikimedia.org/wiki/User-Agent_policy">User-Agent
policy</a>, you are strongly advised to provide your own User-Agent header
when accessing Wikimedia websites. The User-Agent information should
include the name and version of your bot as well as a URL (homepage,
repository) and contact e-mail.</p>

<p>You can set the default User-Agent globally:</p>

<pre class="ruby"><span class="ruby-constant">MediaWiki</span><span class="ruby-operator">::</span><span class="ruby-constant">Gateway</span>.<span class="ruby-identifier">default_user_agent</span> = <span class="ruby-string">&#39;MyCoolTool/1.1 (http://example.com/MyCoolTool/; MyCoolTool@example.com)&#39;</span>
</pre>

<p>You can also set it on an instance by instance basis, overriding the global
default:</p>

<pre class="ruby"><span class="ruby-identifier">mw</span> = <span class="ruby-constant">MediaWiki</span><span class="ruby-operator">::</span><span class="ruby-constant">Gateway</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;http://my-wiki.example/w/api.php&#39;</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;MyCoolTool/1.1 (http://example.com/MyCoolTool/; MyCoolTool@example.com)&#39;</span>)
</pre>

<p>You only need to provide the part that identifies your own bot, an
additional part denoting that your bot is based on <a
href="MediaWiki/Gateway.html">MediaWiki::Gateway</a> is appended
automatically.</p>

<h2 id="label-Development+environment">Development environment<span><a href="#label-Development+environment">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>To compile and test <a href="MediaWiki/Gateway.html">MediaWiki::Gateway</a>
locally, install its development dependencies:</p>

<pre>gem install --development mediawiki-gateway</pre>

<p>Then this will list the available options:</p>

<pre>rake -T</pre>

<p>To build and install the gem use:</p>

<pre>rake gem:install</pre>

<h3 id="label-Testing+against+a+live+MediaWiki+instance">Testing against a live MediaWiki instance<span><a href="#label-Testing+against+a+live+MediaWiki+instance">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<p>You need to have <a href="https://docker.com">Docker</a> and <a
href="https://rubygems.org/gems/mediawiki-testwiki">mediawiki-testwiki</a>
installed.</p>

<h2 id="label-Status">Status<span><a href="#label-Status">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>This gem is no longer in active development. Pull requests that fix bugs or
add new features are more than welcome, but asking for new features is
unlikely to make them materialize out of thin air.</p>

<h2 id="label-Credits">Credits<span><a href="#label-Credits">&para;</a> <a href="#documentation">&uarr;</a></span></h2>

<p>Loosely maintained by Jani Patokallio and <a
href="https://github.com/blackwinter">Jens Wille</a>. If you&#39;d be
seriously interested in joining as an active maintainer, drop us a line!</p>

<p>Thanks to:</p>
<ul><li>
<p>John Carney, Mike Williams, Daniel Heath and the rest of the Lonely Planet
Atlas team.</p>
</li><li>
<p>Github users for code contributions, see <a
href="https://github.com/jpatokal/mediawiki-gateway/pulls">github.com/jpatokal/mediawiki-gateway/pulls</a></p>
</li></ul>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.2.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

